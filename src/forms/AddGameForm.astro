---
// src/components/forms/AddGameForm.astro
import { createSignal } from 'solid-js';

const [title, setTitle] = createSignal('');
const [platform, setPlatform] = createSignal('');

async function handleSubmit(event) {
  event.preventDefault();
  const token = localStorage.getItem('token');
  const response = await fetch('/api/games', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`,
    },
    body: JSON.stringify({ title: title(), platform: platform() }),
  });

  if (response.ok) {
    // Redirigir o actualizar la lista de juegos
  } else {
    // Manejar el error
  }
}
---
<form on:submit={handleSubmit} class="max-w-md mx-auto">
  <div class="mb-4">
    <label for="titulo" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">TÃ­tulo del Juego</label>
    <input type="text" id="titulo" value={title()} onInput={(e) => setTitle(e.target.value)} class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
  </div>
  <div class="mb-4">
    <label for="plataforma" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Plataforma</label>
    <input type="text" id="plataforma" value={platform()} onInput={(e) => setPlatform(e.target.value)} class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
  </div>
  <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center">Agregar Juego</button>
</form>